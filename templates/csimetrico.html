{% extends "layout.html" %}
{% block title %}
C. Sim√©trico
{% endblock %}
{% block content %}
<h1>Encriptar y desencriptar mensaje con AES</h1>

    <h2>Encriptar Mensaje</h2>
    <form action="/csimetrico" method="post" enctype="multipart/form-data">
        <input type="file" name="archivo"><br><br>
        <label for="archivo_nombre">Nombre del Archivo:</label>
        <input type="text" id="archivo_nombre" name="archivo_nombre" required><br><br>
        <label for="key">Clave:</label><br>
        <input type="text" id="key" name="key"><br><br>
        <input type="hidden" name="mode" value="encrypt">
        <input type="submit" value="Encriptar">
    </form>
    
    {% if encrypted_message %}
        <h2>Mensaje Encriptado:</h2>
        <p>{{ encrypted_message }}</p>
        <h2>Contenido del mensaje:</h2>
        <p>{{ contenido }}</p>
    {% endif %}

    
    <h2>Desencriptar Mensaje</h2>
    <form action="/csimetrico" method="post" enctype="multipart/form-data">
        <label for="documento">Fichero a desencriptar:</label>
        <select name="archivo" id="archivo2">
            {% for archivo in listado_archivos %}
                <option value="{{ archivo }}">{{ archivo }}</option>
            {% endfor %}
        </select>
        <br><br>
        <label for="key_decrypt">Clave:</label><br>
        <input type="text" id="key_decrypt" name="key"><br><br>
        <input type="hidden" name="mode" value="decrypt">
        <input type="submit" value="Desencriptar">
    </form>

    <h2>Contenido del archivo seleccionado:</h2>
      <p>{{ contenido2 }}</p>

    {% if decrypted_message %}
        <h2>Mensaje:</h2>
        <p>{{ decrypted_message }}</p>
    {% endif %}
{% endblock %}